(function(a){a(document).ready(function(){var d={fontset:"",modules:[],branding:{}};var e=false;var h={init:function(){a(".branding-bg-color").wpColorPicker(b);a("#semplice").on("click",".content-container a, .mc-content-container a, .mc-sub-content-container a",function(o){o.preventDefault()});if(a(".semplice-content").val()){a(".loader").show();var n=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"init",post_id:post_id},dataType:"json"});n.done(function(o){d=a.parseJSON(o.rom);var p=a(".fontset").val();if(d.branding===undefined){d.branding={}}if(d.modules===undefined){d.modules=[]}a("#semplice-content").css({"background-color":d.branding["background-color"],"background-image":"url("+d.branding["background-image"]+")","background-size":d.branding["background-size"],"background-position":d.branding["background-position"],"background-repeat":d.branding["background-repeat"]});if(d.branding["background-image"]){a(".branding-bg-image-preview").attr("src",d.branding["background-image"]).show();a("input[name=branding-bg-image]").val(d.branding["background-image"])}a("#semplice-content").children("#content-holder").remove();a("#semplice-content").append(o.html);a(".is-masonry").each(function(){var q=a(this).attr("id");if(q!==undefined){a("#"+q).masonry()}});a(".image-link").click(function(q){return false});if(p!=="default"){a(".custom-fontset").find("option").each(function(){if(a(this).val()===p){a(this).attr("selected","selected")}else{a(this).removeAttr("selected")}});h.customFontset(p)}else{if(default_fontset){h.customFontset(default_fontset)}else{h.customFontset()}}a(".save-to-wp").addClass("save-to-wp-activated");a(".loader").fadeOut("slow")});n.fail(function(o,p){alert("JSON Parse Error: "+p);a(".loader").fadeOut("slow")});n.error(function(o){alert(o.responseText)})}else{if(default_fontset){h.customFontset(default_fontset)}else{h.customFontset()}a("#semplice-content").html("");a("#semplice-content").append('<div id="content-holder"></div>');a(".save-to-wp").addClass("save-to-wp-activated")}},add:function(t){a(".loader").show();var n=i("content");var s="#"+n;var o=a(t).data("content-type");var r={"background-color":"transparent","background-image":"","background-size":"none","background-position":"50% 0%","background-repeat":"no-repeat","padding-top":"0px","padding-bottom":"0px","padding-right":"0px","padding-left":"0px"};if(o==="content-thumbnails"&&a("#semplice").find(".content-thumbnails").length>0){alert("You can only add 1 Thumbnail View per Page");a(".loader").fadeOut("slow");return false}if(o==="multi-column"){d[s]={columns:{},styles:{}}}else{d[s]={styles:{}}}var p=a(t).data("module-id");if(p){d[s]["custom_module"]=p;a(".modules-sub").fadeOut("fast")}d[s].styles=r;var q=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:n,content_type:o,edit_mode:"new",rom:d[s]},dataType:"html"});q.done(function(u){if(u==="ModuleNotFound"){alert("Module not found! Please make sure the selected module is installed.");a(".loader").fadeOut("slow")}else{a("#content-holder").append(u);a(s).find(".color-picker").wpColorPicker(m);a(s).find(".wp-picker-default").remove();a(s).find(".padding-left, .padding-right").remove();if(o==="multi-column"){a(s).find(".save").attr("class","save-mc");a(s).find(".duplicate").attr("class","duplicate-mc");k()}a(s).addClass("in-edit-mode");a(s).find(".fadein").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(s).offset().top-100},0)}});q.fail(function(u,v){alert("Request failed: "+v);a(".loader").fadeOut("slow")})},addColumn:function(r){a(".loader").show();var q="#"+a(r).data("content-id");var n=i("column");var p="#"+n;var o=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:n,parent_id:q,content_type:"add-column",edit_mode:"new"},dataType:"html"});o.done(function(s){a(q).find(".columns").append(s);a(p).find(".save").remove();a(p).find(".fadein").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(p).offset().top-100},0)});o.fail(function(s,t){alert("Request failed: "+t);a(".loader").fadeOut("slow")})},addColumnContent:function(s){a(".loader").show();var v="#"+(s).data("content-id");var p=i("column_content");var n="#"+(s).data("column-id");var o="#"+p;var t=a(s).data("content-type");var u={"background-color":"transparent","background-image":"","background-size":"none","background-position":"50% 0%","background-repeat":"no-repeat","padding-top":"0px","padding-bottom":"0px","padding-right":"0px","padding-left":"0px"};if(d[v].columns[n]===undefined){d[v].columns[n]={}}d[v].columns[n][o]={styles:{}};d[v].columns[n][o].styles=u;var r=a(s).data("module-id");if(r){d[v].columns[n][o]["custom_module"]=r;a(".modules-sub").fadeOut("fast")}var q=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:p,ccId:v,content_type:t,rom:d[v],column_id:n,edit_mode:"new",is_column_content:true},dataType:"html"});q.done(function(w){if(w==="ModuleNotFound"){alert("Module not found! Please make sure the selected module is installed.");a(".loader").fadeOut("slow")}else{a(n).find(".column-inner").append(w);if(r){a(o).attr("data-module-id",r)}a(o).find(".save").remove();a(o).prev(".placeholder").remove();a(o).find(".color-picker").wpColorPicker(m);a(o).find(".wp-picker-default").remove();a(o).addClass("in-edit-mode");a(o).find(".fadein").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(o).offset().top-140},0)}});q.fail(function(w,x){alert("Request failed: "+x);a(".loader").fadeOut("slow")})},save:function(t,r){a(".loader").show();var o=a(t).data("content-id");var s="#"+a(t).data("content-id");var p=a(t).data("content-type");var n;d[s]={content:"",styles:{},options:{},custom_module:"",content_type:p};a(s).find(".is-content").each(function(){d[s].content=a(this).val();if(a(this).val().length===0){n=true}});a(s).find(".is-option").each(function(){if(a.isArray(a(this).val())){d[s].options[a(this).attr("name")]=a(this).val()}else{d[s].options[a(this).attr("name")]=a(this).val().replace(/["']/g,"")}});a(s).find(".is-style").each(function(){d[s].styles[a(this).attr("name")]=a(this).val().replace(/["']/g,"")});a(s).find(".is-custom-module").each(function(){d[s].custom_module=a(this).val().replace(/["']/g,"")});d[s].styles["background-color"]=g(d[s].styles["background-color"]);if(!n){var q=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:o,content_type:p,rom:d[s]},dataType:"html"});q.done(function(u){a(s).append(u);a("#semplice").on("click",".save",{duplicate:false},l);a("#semplice").on("click",".duplicate",{duplicate:true},l);a(s).find(".edit-content").remove();a(s).removeClass("in-edit-mode");a(s).find(".fadein-view").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein-view")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(s).offset().top-100},0);if(r){h.duplicate(t)}});q.fail(function(u,v){alert("Request failed: "+v);a("#semplice").on("click",".save",l);a(".loader").fadeOut("slow")})}else{alert("Please add some content before save!");a("#semplice").on("click",".save",{duplicate:false},l);a("#semplice").on("click",".duplicate",{duplicate:true},l);a(".loader").fadeOut("slow")}},saveSingleEdit:function(q){a(".loader").show();var v="#"+a(q).data("container-id");var u=a(q).data("container-id");var t=a(q).data("content-id");var o="#"+a(q).data("content-id");var n=a(q).data("column-id");var r=a(q).data("content-type");var s;a(o).find(".is-content").each(function(){d[v].columns[n][o].content=a(this).val();if(a(this).val().length===0){s=true}});a(o).find(".is-cc-option").each(function(){d[v].columns[n][o].options[a(this).attr("name")]=a(this).val().replace(/["']/g,"")});a(o).find(".is-cc-style").each(function(){d[v].columns[n][o].styles[a(this).attr("name")]=a(this).val().replace(/["']/g,"")});d[v].columns[n][o].styles["background-color"]=g(d[v].columns[n][o].styles["background-color"]);if(!s){var p=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:u,rom:d[v],content_type:"multi-column"},dataType:"html"});p.done(function(w){a(v).find(o).remove();a(v).append(w);a("#semplice").on("click",".save-se",c);a(v).removeClass("in-edit-mode");a(v).find(".fadein-view").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein-view")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(v).offset().top-100},0)});p.fail(function(w,x){alert("Request failed: "+x);a("#semplice").on("click",".save-se",c);a(".loader").fadeOut("slow")})}else{alert("Please add some content before save!");a("#semplice").on("click",".save-se",c);a(".loader").fadeOut("slow")}},saveColumnContent:function(t,r){a(".loader").show();var o=a(t).data("content-id");var s="#"+a(t).data("content-id");var n;var p=a(t).data("content-type");d[s]={columns:{},styles:{},options:{},content_type:p};a(s).find(".is-option").each(function(){d[s].options[a(this).attr("name")]=a(this).val().replace(/["']/g,"")});a(s).find(".is-style").each(function(){d[s].styles[a(this).attr("name")]=a(this).val().replace(/["']/g,"")});d[s].styles["background-color"]=g(d[s].styles["background-color"]);a(s).find(".column").each(function(){var u="#"+a(this).attr("id");d[s].columns[u]={options:{}};a(a(this)).find(".is-option").each(function(){d[s].columns[u].options[a(this).attr("name")]=a(this).val().replace(/["']/g,"")});a(this).find(".column-content").each(function(){var y=a(this);var x="#"+a(this).data("content-id");var w="#"+a(this).data("in-column");var v=a(this).data("content-type");d[s].columns[w][x]={content:{},styles:{},options:{},custom_module:"",content_type:v};a(this).find(".is-content").each(function(){d[s].columns[w][x].content=a(this).val();if(a(this).val().length===0){n=true}});a(this).find(".is-cc-option").each(function(){d[s].columns[w][x].options[a(this).attr("name")]=a(this).val().replace(/["']/g,"")});a(this).find(".is-cc-style").each(function(){d[s].columns[w][x].styles[a(this).attr("name")]=a(this).val().replace(/["']/g,"")});a(this).find(".is-cc-custom-module").each(function(){d[s].columns[w][x].custom_module=a(this).val().replace(/["']/g,"")});d[s].columns[w][x].styles["background-color"]=g(d[s].columns[w][x].styles["background-color"])})});if(a(s).find(".column").length!==0&&a(s).find(".column-content").length!==0&&!n){var q=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",id:o,rom:d[s],content_type:p},dataType:"html"});q.done(function(u){a(s).append(u);a("#semplice").on("click",".save-mc",{duplicate:false},f);a("#semplice").on("click",".duplicate-mc",{duplicate:true},f);a(s).find(".edit-content").remove();a(s).removeClass("in-edit-mode");a(s).find(".fadein-view").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein-view")});a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(s).offset().top-100},0);if(r){h.duplicate(t)}});q.fail(function(u,v){alert("Request failed: "+v);a("#semplice").on("click",".save-mc",{duplicate:false},f);a("#semplice").on("click",".duplicate-mc",{duplicate:true},f);a(".loader").fadeOut("slow")})}else{alert("Please add a column and a column content before save.");a("#semplice").on("click",".save-mc",{duplicate:false},f);a("#semplice").on("click",".duplicate-mc",{duplicate:true},f);a(".loader").fadeOut("slow")}},edit:function(r){a(".loader").show();k();var n=a(r).data("content-id");var q="#"+a(r).data("content-id");var o=a(r).data("content-type");var p=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"edit",id:n,content_type:o,rom:d[q]},dataType:"html"});p.done(function(s){if(s==="ModuleNotFound"){alert("Module not found! Please re-install the module used in this content.");a("#semplice").on("click",".content-container",j);a(".loader").fadeOut("slow")}else{a(q).append(s);if(o==="multi-column"){a(q).find(".mc-content-container").remove()}else{a("#semplice").on("click",".content-container",j);a(q).find(".content-container").remove()}a(q).find("input[name=background-image]").each(function(){if(a(this).val()){a(this).next().show()}});if(a("input[name=img]").val()){a(q).find("img.image-preview").show()}a(q).find(".color-picker").wpColorPicker(m);a(q).find(".wp-picker-default").remove();if(o==="multi-column"){a(q).find(".save").attr("class","save-mc");a(q).find(".duplicate").attr("class","duplicate-mc");a(q).find(".padding-left").first().remove();a(q).find(".padding-right").first().remove()}else{a(q).find(".padding-left, .padding-right").remove()}a(q).find(".fadein").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein")});a(q).addClass("in-edit-mode");a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(q).offset().top-100},0)}});p.fail(function(s,t){alert("Request failed: "+t);if(o!=="multi-column"){a("#semplice").on("click",".content-container",j)}a(".loader").fadeOut("slow")})},singleEdit:function(o,u){a(".loader").show();var t="#"+a(o).data("content-id");var q=a(u).data("single-edit-column-id");var r=a(u).data("single-edit-content-id");var s="#"+a(u).data("single-edit-content-id");var n=a(u).data("single-edit-content-type");var p=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"single-edit",id:r,ccId:t,column_id:q,content_type:n,rom:d[t].columns[q][s]},dataType:"html"});p.done(function(v){a(t).append(v);a(t).find(".mc-content-container").remove();a(t).find("input[name=background-image]").each(function(){if(a(this).val()){a(this).next().show()}});if(a("input[name=img]").val()){a(t).find("img.image-preview").show()}a(t).find(".color-picker").wpColorPicker(m);a(t).find(".wp-picker-default").remove();a(s).find(".fadein").transition({opacity:1},500,"ease",function(){a(this).removeClass("fadein")});a(t).addClass("in-edit-mode");a(".loader").fadeOut("slow");a(a.browser.webkit?"body":"html").animate({scrollTop:a(t).offset().top-100},0)});p.fail(function(v,w){alert("Request failed: "+w);a(".loader").fadeOut("slow")})},duplicate:function(t){var o=a(t).data("content-id");var s="#"+a(t).data("content-id");var r=a(t).data("content-type");if(r==="content-thumbnails"&&a("#semplice").find(".content-thumbnails").length>0){alert("You can only add 1 Thumbnail View per Page");a(".loader").fadeOut("slow");return false}var p=i("content");var q="#"+p;d[q]=jQuery.extend(true,{},d[s]);a(s).clone().insertAfter(s).attr("id",p).html("");var n=a('<a data-content-id="'+p+'" data-content-type="'+r+'">');if(r!=="multi-column"){a("#semplice").off("click",".content-container")}h.edit(n)},remove:function(o){var n="#"+a(o).data("content-id");a(n).transition({opacity:0,marginTop:-40},400,"ease",function(){delete d[n];a(n).remove()})},removeColumn:function(p){var o="#"+a(p).data("content-id");var n=a(p).data("parent-id");a(o).transition({opacity:0,marginTop:-40},400,"ease",function(){if(d[n]!==undefined){delete d[n][o]}a(o).remove()})},up:function(p){var o="#"+a(p).data("content-id");var n=a(o).prev().attr("id");a(o).insertBefore("#"+n);a(a.browser.webkit?"body":"html").animate({scrollTop:a(o).offset().top-100},0)},down:function(p){var o="#"+a(p).data("content-id");var n=a(o).next().attr("id");a(o).insertAfter("#"+n);a(a.browser.webkit?"body":"html").animate({scrollTop:a(o).offset().top-100},0)},removeMedia:function(p,n){var o="#"+a(p).data("content-id");a(o).find(".is-"+n).first().val("");a(o).find("."+n+"-upload").first().text("Upload "+n);a(o).find("."+n+"-preview").first().attr("src","");a(o).find("."+n+"-preview").first().hide();if(n==="branding-bg-image"){a(o).find(".is-"+n).val("");a("#semplice-content").css("background-image","none");d.branding["background-image"]=""}},removeBg:function(o){var n="#"+a(o).data("content-id");a(n).find(".is-bg-image").val("");a(n).find(".bg-upload").text("Upload Image");a(n).find(".bg-preview").attr("src","");a(n).find(".bg-preview").hide()},customFontset:function(o){var n=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"custom-fontset",fontset_id:o},dataType:"html"});n.done(function(p){if(!o){d.fontset="default"}else{d.fontset=o}a("[data-fontset-id=ce-fontset]").remove();a("#ce-fontset").remove();a("head").append(p);a(".loader").fadeOut("slow")});n.fail(function(p,q){alert("Request failed: "+q);a(".loader").fadeOut("slow")})},loadTemplate:function(o,n){a(".loader").show();a(".templates-sub").fadeOut(250,function(){var p=a.ajax({url:ajaxurl,type:"POST",data:{action:"semplice_ce_ajax",edit_mode:"load-template",template_id:o,template_type:n},dataType:"json"});p.done(function(q){console.log(q);a("#semplice-content").html(q.html);d=a.parseJSON(q.rom);if(d.branding===undefined){d.branding={}}if(d.modules===undefined){d.modules=[]}d.branding=a.parseJSON(q.branding);a("#semplice-content").css({"background-color":d.branding["background-color"],"background-image":"url("+d.branding["background-image"]+")","background-size":d.branding["background-size"],"background-position":d.branding["background-position"],"background-repeat":d.branding["background-repeat"]});a(".branding-bg-color").val(d.branding["background-color"]);a(".branding-sub .wp-color-result").css("backgroundColor",d.branding["background-color"]);var r=[d.branding["background-size"],d.branding["background-position"],d.branding["background-repeat"]];var t=0;a(".branding-sub .select-box").each(function(){var u=r[t];a(this).find("option").each(function(){if(a(this).val()===u){a(this).attr("selected","selected")}else{a(this).removeAttr("selected")}});t++});if(d.branding["background-image"]){a(".branding-bg-image-preview").attr("src",d.branding["background-image"]).show();a("input[name=branding-bg-image]").val(d.branding["background-image"])}if(d.fontset){var s=d.fontset;if(s!=="default"){a(".custom-fontset").find("option").each(function(){if(a(this).val()===s){a(this).attr("selected","selected")}else{a(this).removeAttr("selected")}});h.customFontset(s)}else{if(default_fontset){h.customFontset(default_fontset)}else{h.customFontset()}}}a(".loader").fadeOut("slow");if(n==="semplice"){a(".overlay").fadeIn(150);a(".no-images").fadeIn(250)}});p.fail(function(q,r){alert("Request failed: "+r);a(".loader").fadeOut("slow")})})},showLayers:function(p){a(".options-sub .show-layers").addClass("checked");var o=(p).data("content-id");a("#semplice").addClass("show-all-layers");a(".content-container, .mc-content-container").hide();a("#content-holder").sortable({axis:"y",cancel:".edit-content, .top-layer"});var n;a("#content-holder > div").each(function(){var t=false;var u="";var v="#"+a(this).attr("id");var q=a(this).attr("id");var s=a(this).children(".content-container, .mc-content-container").attr("data-content-type");if(a(this).hasClass("in-edit-mode")){a(this).find(".edit-content").hide();a(this).addClass("layer-mode");t="edit";u="In edit mode";var r=a(this).find('input[name="layer-name"]').val()}else{var r=d[v].options["layer-name"]}if(o==q){a(this).append('<div class="layer"><div class="icon"></div><p class="layer-name">'+r+'</p><a class="edit-layer" data-content-id="'+q+'" data-content-type="'+s+'" data-edit-mode="'+t+'"></a><a class="remove" data-content-id="'+q+'"></a><p class="in-edit-mode">'+u+'</p><div class="active-layer"></div><div class="drag-icon"></div>');n=v}else{a(this).append('<div class="layer"><div class="icon"></div><p class="layer-name">'+r+'</p><a class="edit-layer" data-content-id="'+q+'" data-content-type="'+s+'" data-edit-mode="'+t+'"></a><a class="remove" data-content-id="'+q+'"></a><p class="in-edit-mode">'+u+'</p><div class="drag-icon"></div>')}a(this).children(".layer").stop().fadeIn(300)});a("#semplice-content").prepend('<div class="layer top-layer hide-layers" data-content-id="'+o+'"><div class="icon"></div><p class="layer-name">Back to edit mode</p></div>');a(".top-layer").fadeIn(300);if(n){a(a.browser.webkit?"body":"html").animate({scrollTop:a(n).offset().top-150},0)}a(p).addClass("checked")},hideLayers:function(r,n){a(".options-sub .show-layers").removeClass("checked");var q=a(r).data("content-id");var p=a(r).data("edit-mode");var o=a(r).data("content-type");a("#semplice").removeClass("show-all-layers");a(".content-container, .mc-content-container").show();a("#content-holder > div").each(function(){a(this).children(".layer").remove();if(a(this).hasClass("in-edit-mode")){a(this).find(".edit-content").show();a(this).removeClass("layer-mode")}});a(".top-layer").remove();a("#content-holder").sortable("destroy");if(n&&p!=="edit"){if(o!=="multi-column"){a("#semplice").off("click",".content-container")}h.edit(r)}else{if(q!=="undefined"){a(a.browser.webkit?"body":"html").animate({scrollTop:a("#"+q).offset().top-100},0)}}},saveToWp:function(){a(".loader").show();a("head").find("[data-fontset-id=ce-fontset]").each(function(){a(this).remove()});a("#ce-fontset").remove();a(".is-shortcode").each(function(){a(this).find(".executed").html(a(this).find(".unexecuted").html().replace("unex_",""))});var v=a("#semplice-content").html();a(".semplice-content").val(v);d.branding={"background-color":a(".branding-bg-color").val(),"background-image":a(".branding-bg-image").val(),"background-size":a(".branding-bg-size").val(),"background-position":a(".branding-bg-pos").val(),"background-repeat":a(".branding-bg-repeat").val()};if(d.fontset.length===0){d.fontset="default"}a(".fontset").val(d.fontset);a(".rom").val(JSON.stringify(d));var n=a(".content-p").length;var s=a(".content-img").length;var o=a(".content-video").length;var q=a(".mc-sub-content-container").length;var x=a(".content-gallery").length;var r=a(".content-audio").length;var w=a(".content-spacer").length;var u=a(".content-thumbnails").length;var t='<span class="comment">// Content stats</span><br /><br /><span class="num">'+n+'</span> paragraph(s), <span class="num">'+s+'</span> image(s)<br /><span class="num">'+o+'</span> video(s), <span class="num">'+q+'</span> column content(s)<br /><span class="num">'+x+'</span> gallery(s), <span class="num">'+r+'</span> audio file(s)<br /><span class="num">'+w+'</span> spacer(s), <span class="num">'+u+"</span> thumbview";a(".branding").val(JSON.stringify(d.branding));a("[data-modules-array]").each(function(){d.modules.push(a(this).data("modules-array"))});a(".modules").val(JSON.stringify(d.modules));a(".stats").val(t);a(".content-code").html(t);e=true;a("#wpwrap").show();a("#semplice").fadeOut(300)}};a(document).on("click",".add-semplice-editor",function(){if(!e){a("#semplice").appendTo("body");a(a.browser.webkit?"body":"html").animate({scrollTop:0},0,function(){a("#semplice").fadeIn(300,function(){a("#wpwrap").hide();h.init()})})}else{alert("Please update or save your page / project before reopen the content editor!")}});a("#semplice").on("click",".add-content",function(){if(!a("#semplice").hasClass("show-all-layers")){h.add(a(this))}else{alert("Please exit the layer mode to add new content")}});a("#semplice").on("click",".add-column-content",function(){h.addColumnContent(a(this))});a("#semplice").on("click",".add-column",function(){h.addColumn(a(this))});function l(n){a("#semplice").off("click",".save");a("#semplice").off("click",".duplicate");h.save(a(this),n.data.duplicate)}a("#semplice").on("click",".save",{duplicate:false},l);a("#semplice").on("click",".duplicate",{duplicate:true},l);function f(n){a("#semplice").off("click",".save-mc");a("#semplice").off("click",".duplicate-mc");h.saveColumnContent(a(this),n.data.duplicate)}a("#semplice").on("click",".save-mc",{duplicate:false},f);a("#semplice").on("click",".duplicate-mc",{duplicate:true},f);function c(){a("#semplice").off("click",".save-se");h.saveSingleEdit(a(this))}a("#semplice").on("click",".save-se",c);a("#semplice").on("click",".edit",function(){h.edit(a(this))});function j(){if(!a("#semplice").hasClass("show-all-layers")){a("#semplice").off("click",".content-container");h.edit(a(this))}else{h.hideLayers(a(this),true)}}a("#semplice").on("click",".content-container",j);a("#semplice").on("click",".edit-layer",j);a("#semplice").on("click",".video",function(n){n.stopPropagation()});a("#semplice").on("click",".mc-sub-content-container",function(n){var q=a(this);var p=a(this).offset().left,o=a(this).offset().top;a(this).children(".single-edit").css({top:(n.pageY-o),left:(n.pageX-p)}).show();a(this).find(".edit-column").unbind().click(function(){a(q).children(".single-edit").remove();h.edit(a(q))});a(this).find(".edit-single").unbind().click(function(){a(q).children(".single-edit").remove();h.singleEdit(a(q),a(this))})});a("#semplice").on("click","a.column-duplicate",function(){h.duplicateColumn(a(this))});a("#semplice").on("click",".remove",function(){a(".remove-confirm").data({"content-id":a(this).data("content-id"),"is-column":"","parent-id":""});a(".overlay").fadeIn(100);a(".confirm").fadeIn(100)});a("#semplice").on("click",".remove-column",function(){a(".remove-confirm").data({"content-id":a(this).data("column-id"),"is-column":"is-column","parent-id":a(this).data("parent-id")});a(".overlay").fadeIn(100);a(".confirm").fadeIn(100)});a("#semplice").on("click",".remove-confirm",function(){a(".overlay").fadeOut(100);a(".confirm").fadeOut(100);var n=a(this);if(a(this).data("is-column")==="is-column"){h.removeColumn(a(n))}else{h.remove(a(n))}});a("#semplice").on("click",".remove-decline",function(){a(".overlay").fadeOut(100);a(".confirm").fadeOut(100)});a("#semplice").on("click",".cancel-to-wp",function(){a(".overlay").fadeIn(100);a(".cancel").fadeIn(100)});a("#semplice").on("click",".cancel-confirm",function(){a(".overlay").fadeOut(100);a(".cancel").fadeOut(100,function(){a("#wpwrap").show();a("#semplice").fadeOut(300)})});a("#semplice").on("click",".cancel-decline",function(){a(".overlay").fadeOut(100);a(".cancel").fadeOut(100)});a("#semplice").on("click",".show-layers",function(){if(!a("#semplice").hasClass("show-all-layers")){h.showLayers(a(this))}else{h.hideLayers(a(this))}});a("#semplice").on("click",".hide-layers",function(){h.hideLayers(a(this))});a("#semplice").on("click",".up",function(){h.up(a(this))});a("#semplice").on("click",".down",function(){h.down(a(this))});a("#semplice").on("click",".column-up",function(){h.up(a(this))});a("#semplice").on("click",".column-down",function(){h.down(a(this))});a("#semplice").on("click",".remove-media",function(){h.removeMedia(a(this),a(this).data("media"))});a("#semplice").on("click",".save-to-wp-activated",function(){if(a("#semplice-content").find(".in-edit-mode").length){alert("Please save or delete open edit fields.")}else{if(a("#semplice").hasClass("show-all-layers")){alert("Please exit the layer mode before save.")}else{h.saveToWp()}}});a("#semplice").on("change",".select-box",function(){var n=a(this).val();a(this).find("option").each(function(){if(a(this).val()===n){a(this).attr("selected","selected")}else{a(this).removeAttr("selected")}})});a("#semplice").on("change",".branding-bg-select",function(){var n=a(this).data("css-attribute");a("#semplice-content").css(n,a(this).val())});a("#semplice").on("change",".custom-fontset",function(){a(".loader").show();var n=a(this).val();a(this).find("option").each(function(){if(a(this).val()===n){a(this).attr("selected","selected")}else{a(this).removeAttr("selected")}});if(n!=="default"){h.customFontset(n)}else{if(default_fontset){h.customFontset(default_fontset)}else{h.customFontset()}}});a("#semplice").on("click","a.background",function(){a(this).next(".background-sub").fadeIn(150)});a("#semplice").on("click","a.ce-dismiss",function(){a(".overlay").fadeOut(150);a(".no-images").fadeOut(250)});a("#semplice").on("change",".select-project, .select-page",function(){var n=a(this).val();if(n!=="default"){a(".loader").show();a(".template-confirm").data({"template-id":n,"template-type":"object"});a(".overlay").fadeIn(100);a(".confirm-template").fadeIn(100)}});a("#semplice").on("click",".template-confirm",function(){a(".overlay").fadeOut(100);a(".confirm-template").fadeOut(100);h.loadTemplate(a(this).data("template-id"),a(this).data("template-type"))});a("#semplice").on("click",".template-decline",function(){a(".loader").hide();a(".overlay").fadeOut(100);a(".confirm-template").fadeOut(100)});a("#semplice").on("click","a.branding",function(){a(".branding-sub").fadeIn(150)});a("#semplice").on("click","a.show-templates",function(){a(".templates-sub").fadeIn(150)});a("#semplice").on("click","a.show-options",function(){a(".options-sub").fadeIn(150)});a("#semplice").on("click","a.show-modules",function(){if(a(this).data("in-column")){var n=a(this).data("column-id");a(".modules-sub-"+n).fadeIn(150)}else{a(".modules-sub-global").fadeIn(150)}});a("#semplice").on("click","a.padding",function(){a(this).next(".padding-sub").fadeIn(150)});a("#semplice").on("change","select[name=wysiwyg_bg_color]",function(){var n="#cke_"+a(this).data("content-id")+" .cke_wysiwyg_div";if(a(this).val()==="white"){a(n).css("backgroundColor","#ffffff")}else{a(n).css("backgroundColor","#000000")}});a("#semplice").mouseup(function(s){var u=a(".background-sub");var q=a(".media-modal-content");if(!u.is(s.target)&&!q.is(s.target)&&u.has(s.target).length===0){u.fadeOut(150)}var r=a(".branding-sub");if(!r.is(s.target)&&r.has(s.target).length===0){r.fadeOut(150)}var p=a(".options-sub");if(!p.is(s.target)&&p.has(s.target).length===0){p.fadeOut(150)}var t=a(".templates-sub");if(!t.is(s.target)&&t.has(s.target).length===0){t.fadeOut(250)}var n=a(".modules-sub");if(!n.is(s.target)&&n.has(s.target).length===0){n.fadeOut(250)}var v=a(".padding-sub");if(!v.is(s.target)&&v.has(s.target).length===0){v.fadeOut(150)}var o=a(".single-edit");if(!o.is(s.target)&&o.has(s.target).length===0){o.hide()}});a(".show-grid").toggle(function(){a("#grid").fadeIn("300");a(this).addClass("checked")},function(){a("#grid").fadeOut("300");a(this).removeClass("checked")});a("#semplice").on({mouseenter:function(){var n=a(this).find(".tooltip").width();n=(n-70)/2;a(this).find(".tooltip").css("marginLeft",-n);a(this).find(".tooltip").stop().fadeIn(120)},mouseleave:function(){a(this).find(".tooltip").stop().fadeOut(120)}},"ul.types li");a("#semplice").on({mouseenter:function(){var n=a(this).find(".tooltip").width();n=(n-50)/2;a(this).find(".tooltip").css("marginLeft",-n);a(this).find(".tooltip").stop().fadeIn(120)},mouseleave:function(){a(this).find(".tooltip").stop().fadeOut(120)}},"ul.atts-save li");function g(n){if(!n){return"transparent"}var p=n.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function o(q){return("0"+parseInt(q).toString(16)).slice(-2)}if(p){return"#"+o(p[1])+o(p[2])+o(p[3])}else{return n}}var m={defaultColor:false,change:function(n,o){},hide:true,palettes:true};var b={defaultColor:false,change:function(n,o){a("#semplice-content").css("background-color",o.color.toString())},hide:true,palettes:true};var i=function(n){return n+"_"+Math.random().toString(36).substr(2,9)};function k(){a(window).scroll(function(){a.each(a(".sticky-mc-atts"),function(){var r=10;var q=a(this).height();var o=a(this).parent().offset().top;var n=a(this).parent().height();var p=a(window).scrollTop();if((o-r)<p&&p<(o-r+n-q)){if(!a(this).hasClass("is-sticky")){a(this).addClass("is-sticky");a(this).css("top",r+50);a(this).show()}}else{if(a(this).hasClass("is-sticky")){a(this).removeClass("is-sticky");a(this).css("top",o);a(this).hide()}}})})}})})(jQuery);